<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MCP è°ƒè¯•æ§åˆ¶å°</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    textarea, input { width: 100%; margin-bottom: 10px; }
    pre { background: #f4f4f4; padding: 10px; height: 300px; overflow-y: scroll; }
  </style>
</head>
<body>
  <h1>ğŸ§  MCP Agent è°ƒè¯•æ§åˆ¶å°</h1>

  <h3>ğŸ“¤ å‘é€è¯·æ±‚</h3>
  <select id="toolSelect">
    <option value="vision-agent/inference">å›¾åƒè¯†åˆ«</option>
    <option value="vision-agent/translate">ç¿»è¯‘</option>
    <option value="vision-agent/ocr">OCRè¯†åˆ«</option>
  </select>
  <input type="text" id="argumentsInput" placeholder='{"image_path": "test_images/test_image.jpg"}' />
  <button onclick="sendRequest()">å‘é€</button>

  <h3>ğŸ“¥ å“åº”ç»“æœ</h3>
  <pre id="responseBox"></pre>

  <script>
    const ws = new WebSocket("ws://localhost:8000/mcp");

    ws.onopen = () => {
      log("ğŸ”— å·²è¿æ¥åˆ° MCP æœåŠ¡");
      // å‘é€åˆå§‹åŒ–æ¡æ‰‹
      ws.send(JSON.stringify({
        jsonrpc: "2.0",
        id: "init",
        method: "initialize",
        params: { capabilities: {} }
      }));
    };

    ws.onmessage = (event) => {
      try {
        const response = JSON.parse(event.data);
        log("ğŸ“© æ”¶åˆ°å“åº”:\n" + JSON.stringify(response, null, 2));
      } catch (e) {
        log("âš ï¸ æ— æ³•è§£æå“åº”: " + event.data);
      }
    };

    function sendRequest() {
      const toolName = document.getElementById("toolSelect").value;
      const arguments = JSON.parse(document.getElementById("argumentsInput").value);

      const reqId = Math.random().toString(36).substring(2, 8);
      const request = {
        jsonrpc: "2.0",
        id: reqId,
        method: "callTool",
        params: {
          tool_name: toolName,
          arguments: arguments
        }
      };
      ws.send(JSON.stringify(request));
      log("ğŸ“¤ å·²å‘é€è¯·æ±‚:\n" + JSON.stringify(request, null, 2));
    }

    function log(message) {
      const box = document.getElementById("responseBox");
      box.textContent += message + "\n\n";
      box.scrollTop = box.scrollHeight;
    }
  </script>
</body>
</html>
